@use "../mixins";

.felt-button {
    position: relative;

    display: inline-flex;
    align-items: center;
    justify-content: center;

    height: var(--button-height, 3.5rem);

    border-radius: calc(var(--button-height, 3.5rem) / 2);

    @include mixins.typography(label-large);
    color: var(--ripple-color);

    cursor: pointer;

    transition-property: color, background-color, border-radius, width;
    @include mixins.spring("xspacial", "fast");

    &__icon {
        border-radius: 0;
    }

    /* #region:    --- Sizes */
    &--xs {
        --button-height: 2rem;
        padding-inline: 0.75rem;
        gap: 0.25rem;
    }

    &--sm {
        --button-height: 2.5rem;
        padding-inline: 1rem;
        gap: 0.5rem;
    }

    &--md {
        --button-height: 3.5rem;
        padding-inline: 1.5rem;
        gap: 0.5rem;
        @include mixins.typography(title-medium);
    }

    &--lg {
        --button-height: 6rem;
        padding-inline: 3rem;
        gap: 0.75rem;
        @include mixins.typography(headline-small);
    }

    &--xl {
        --button-height: 8.5rem;
        padding-inline: 4rem;
        gap: 1rem;
        @include mixins.typography(headline-large);
    }
    /* #endregion: --- Sizes */

    /* #region:    --- Shape */
    &--squared {
        &.felt-button--xs,
        &.felt-button--sm {
            border-radius: 0.75rem;
        }

        &.felt-button--md {
            border-radius: 1rem;
        }

        &.felt-button--lg,
        &.felt-button--xl {
            border-radius: 1.75rem;
        }
    }
    /* #endregion: --- Shape */

    /* #region:    --- Variants */
    &--elevated,
    &--unelevated {
        background-color: var(--surface-container-low);
        --ripple-color: var(--primary);
    }

    &--elevated {
        @include mixins.elevate(1);
    }

    &--filled {
        background-color: var(--primary);
        --ripple-color: var(--on-primary);
    }

    &--tonal {
        background-color: var(--secondary-container);
        --ripple-color: var(--on-secondary-container);
    }

    &--outlined {
        background-color: transparent;
        --ripple-color: var(--on-surface-variant);
        border: 1px solid var(--outline);
    }

    &--text {
        background-color: transparent;
        --ripple-color: var(--primary);
    }
    /* #endregion: --- Variants */

    @include mixins.enabled() {
        &:hover {
            @include mixins.overlay(0.08);
        }

        &:is(:active, :focus) {
            @include mixins.overlay(0.1);
        }

        &:active:not(.felt-fab-button) {
            &.felt-button--xs,
            &.felt-button--sm {
                border-radius: 0.5rem;
            }

            &.felt-button--md {
                border-radius: 0.75rem;
            }

            &.felt-button--lg,
            &.felt-button--xl {
                border-radius: 1rem;
            }
        }

        @include mixins.focus-ring();
    }
}

.felt-icon-button {
    gap: unset;
    padding: unset;

    /* #region:    --- Sizes */
    &.felt-button--xs {
        width: 2rem;

        &.felt-button--narrow {
            width: 1.75rem;
        }

        &.felt-button--wide {
            width: 2.5rem;
        }
    }

    &.felt-button--sm {
        width: 2.5rem;

        &.felt-button--narrow {
            width: 2rem;
        }

        &.felt-button--wide {
            width: 3.25rem;
        }
    }

    &.felt-button--md {
        width: 3.5rem;

        &.felt-button--narrow {
            width: 3rem;
        }

        &.felt-button--wide {
            width: 4.5rem;
        }
    }

    &.felt-button--lg {
        width: 6rem;

        &.felt-button--narrow {
            width: 4rem;
        }

        &.felt-button--wide {
            width: 8rem;
        }
    }

    &.felt-button--xl {
        width: 8.5rem;

        &.felt-button--narrow {
            width: 6.5rem;
        }

        &.felt-button--wide {
            width: 11.5rem;
        }
    }
    /* #endregion: --- Sizes */

    /* #region:    --- Target Size */
    &.felt-button--xs,
    &.felt-button--sm {
        &::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;

            width: max(100%, 3rem);
            height: 3rem;

            background-color: transparent;

            transform: translate(-50%, -50%);
        }
    }
    /* #endregion: --- Target Size */
}

.felt-toggle-button {
    &:not([data-pressed]).felt-button--filled {
        background-color: var(--surface-container);
        --ripple-color: var(--on-surface-variant);
    }

    &[aria-pressed] {
        /* #region:    --- Variant */
        &.felt-button--elevated,
        &.felt-button--unelevated,
        &.felt-button--filled {
            background-color: var(--primary);
            --ripple-color: var(--on-primary);
        }

        &.felt-button--tonal {
            background-color: var(--secondary);
            --ripple-color: var(--on-secondary);
        }

        &.felt-button--outlined {
            background-color: var(--inverse-surface);
            --ripple-color: var(--inverse-on-surface);
        }
        /* #endregion: --- Variant */
    }
}

.felt-fab-button {
    width: var(--fab-size);
    height: var(--fab-size);

    @include mixins.elevate(2);

    @each $color
        in (
            "primary-container",
            "secondary-container",
            "tertiary-container",
            "primary",
            "secondary",
            "tertiary"
        )
    {
        &--#{$color} {
            background-color: var(--#{$color});
            --ripple-color: var(--on-#{$color});
        }
    }

    /* #region:    --- Size */
    &.felt-button--sm {
        width: 3.5rem;
        height: 3.5rem;

        border-radius: 1rem;
    }

    &.felt-button--md {
        width: 5rem;
        height: 5rem;

        border-radius: 1.25rem;
    }

    &.felt-button--lg {
        width: 6rem;
        height: 6rem;

        border-radius: 1.75rem;
    }
    /* #endregion: --- Size */
}

.felt-button-group {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;

    width: fit-content;

    gap: 0.5rem;

    &:not(&--connected) > .felt-icon-button {
        &.felt-button--xs {
            margin-inline: 0.3125rem;

            &:first-child {
                margin-inline-start: 0;
            }

            &:last-child {
                margin-inline-end: 0;
            }
        }

        &.felt-button--sm {
            margin-inline: 0.125rem;

            &:first-child {
                margin-inline-start: 0;
            }

            &:last-child {
                margin-inline-end: 0;
            }
        }
    }

    &--connected {
        width: 100%;

        gap: 0.125rem;

        & > .felt-button--xs,
        & > .felt-button--sm {
            min-width: 3rem;
        }

        /* #region:    --- Shape */
        & > .felt-button {
            &--xs {
                border-radius: 0.25rem;
            }

            &--sm,
            &--md {
                border-radius: 0.5rem;
            }

            &--lg {
                border-radius: 1rem;
            }

            &--xl {
                border-radius: 1.25rem;
            }

            &:first-child.felt-button--rounded {
                border-top-left-radius: calc(var(--button-height, 3.5rem) / 2);
                border-bottom-left-radius: calc(
                    var(--button-height, 3.5rem) / 2
                );
            }
            &:last-child.felt-button--rounded {
                border-top-right-radius: calc(var(--button-height, 3.5rem) / 2);
                border-bottom-right-radius: calc(
                    var(--button-height, 3.5rem) / 2
                );
            }

            &[aria-pressed] {
                border-radius: calc(var(--button-height, 3.5rem) / 2);
            }
        }
        /* #endregion: --- Shape */
    }
}
